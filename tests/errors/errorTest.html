<!doctype html>
  <html>
  <head>
    <!--[if lt IE 9]>
    <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE9.js"></script>
    <![endif]-->
    <script type = "text/javascript">

      // TODO's:
      // + Hook in typography
      // + Hook facebook and twitter buttons

      // Holds the error handling for conditions for ro.me
      Errors = [
        "We are very sorry, but “3 Dreams of Black” is an experiment and unfortunately does not currently function on every configuration. It appears that your computer’s graphics card doesn’t support WebGL technology. You can find more details for troubleshooting here and obtain a list of recommended graphics cards. Although you are unable to participate in the full experience today, we expect this website to be up for a while, so please check back if you’re on a different computer. Though not the full experience, you can also watch a video trailer, access the rest of the ROME album site and learn more about WebGL technology.",
        "Apologies for the tech trouble. “3 Dreams of Black” is an experiment and unfortunately does not currently function on every configuration. It appears your computer’s graphics card doesn’t support WebGL technology. You can find more details for troubleshooting here and obtain a list of recommended graphics cards. Although you are unable to participate in the full experience today, we expect this website to be up for a while, so please check back if you’re on a different computer. Though not the full experience, you can also watch a video trailer, access the rest of the ROME album site and learn more about WebGL technology.",
        "We are sorry, but it appears that your browser does not support WebGL. Please download Google Chrome and try launching this site again. If you are unable to install a new web browser, you can try downloading the Google Chrome Frame plugin instead.",
        "We are sorry, but it appears that your browser does not support WebGL. Please download Google Chrome and try launching this site again.",
        "We are sorry, but it appears that your browser does not support WebGL. “3 Dreams of Black” is an experiment that was designed with the browser Google Chrome in mind. Please try launching this site again on a computer with up-to-date graphics drivers. Though not the full experience, you can also watch a video trailer, access the rest of the ROME album site, and learn more about WebGL technology.",
        "We’re sorry, but “3 Dreams of Black” is an experiment that was designed with the browser Google Chrome in mind. As a result, it may not work perfectly in your current browser. For the best viewing experience, you can download Google Chrome and launch this site again, or go ahead and try it anyway."
      ];

      // scrape everything navigator.userAgent;
      Detector = {
          webgl : ( function () { try { return !! window.WebGLRenderingContext && !! document.createElement( 'canvas' ).getContext( 'experimental-webgl' ); } catch( e ) { return false; } } )(),
          conditions : [
                        ( function () { return hasUserAgent(/[cC]hrome/); } )(),
                        ( function () { return hasUserAgent(/[Ff]ire[Ff]ox\/[4-9]/); } )(),
                        ( function () { return hasUserAgent(/MSIE [789]/) && hasUserAgent(/[Ww]indows [Nn][Tt] [6789]\./); } )(),
                        ( function () { return hasUserAgent(/[Ss]afari/) && hasUserAgent(/[Mm]ac [Oo][Ss] [Xx] 10\_[6789]/); } )(),
                        ( function () { return hasUserAgent(/i[Pp]hone/) || hasUserAgent(/i[Pp]ad/) || hasUserAgent(/[Aa]ndroid/); } )()
                        ],
          message : ""
      };

      // returns true or false based on 
      function hasUserAgent(condition) {
        return navigator.userAgent.match(condition);
      }

      window.onload = function() {
        if(Detector.webgl) {
          // We're good!
          if(Detector.conditions[1]) {
            Detector.message = Errors[5];
          }
          
        } else {
          // run other conditions
          for(var i = 0; i < Detector.conditions.length; i++) {
            if(Detector.conditions[i]) {
              // Then we've found what we're looking for!
              Detector.message = Errors[i];
              break;
            }
          }
        }
        // Just for testing purposes - remove for deploy
        var error = document.getElementById("error");
            error.innerHTML = Detector.message;
      };
      
    </script>
    <style type = "text/css">
      * {
        margin:  0;
        padding: 0;
      }
      body {
        width: 100%;
        height: 100%;
        /* The gradient comes from testCapture.html which takes an alpha picture of the clouds WebGL */
        background: #4584b4 url("images/gradient.png") 0 -400px;
        font-family: "Futura", Arial, sans-serif;
      }
      #container {
        position: absolute;
        width: 100%;
        height: 100%;
        background: url("images/clouds-trans.png") center center no-repeat;
      }
      #content {
        width: 400px;
        margin: 0 auto;
        color: #fff;
        font: 500 12px/18px "Futura", Arial, sans-serif;
        letter-spacing: 1px;
        text-align: center;
      }
      #header {
        width: 100%;
        height: 119px;
        margin: 50px 0;
        text-align: center;
        overflow: hidden;
        background: url("images/header-trans.png") center center no-repeat;
      }
      #error {
        width: 330px;
        padding: 50px 35px;
        background: url("images/bg-trans.png");
      }
      #bottom {
        position: fixed;
        min-width: 930px;
        width: 100%;
        bottom: 0;
        left: 0;

        font: 500 10px/18px "Futura", Arial, sans-serif;
        color: #434343;
        text-transform: uppercase;
        letter-spacing: 1px;
      }
      #shout-out {
        float: left;
        margin: 0 0 50px 100px;
      }
      #navigation {
        float: right;
        margin: 0 100px 50px 0;
      }
      #bottom ul li {
        border-right: 1px solid #a0a0a0;
        padding: 4px 10px;
        width: auto;
        float: left;
        list-style: none;
      }
      #bottom ul li.last,
      #bottom ul li.last li {
        border: none;
        padding: 4px 0 0 10px;
      }
      #shout-out ul li {
        margin: 0;
        border: 0;
      }
      #shout-out li.divider {
        margin: 15px 0 15px 15px;
        border-left: 1px solid #a0a0a0;
      }
      a img {
        border: 0;
      }
      .background-image {
        margin-left: -9000px;
      }
      #content a:link, #content a:visited {
        color: #fff;
      }
      #content a:hover, #content a:active {
        
      }
      #bottom a:link, #bottom a:visited {
        color: #434343;
        text-decoration: none;
      }
      #bottom a:hover, #bottom a:active {
        color: #000;
      }
      .secondary {
        margin: 36px 0 0 235px;
      }
      .clear {
        clear: both;
        width: 0;
        height: 0;
      }
    </style>
  </head>
  <body>

    <div id = "container">
      <div id = "content">
        <div id = "header">
          <h1 class = "background-image">Rome</h1>
          <h2 class = "background-image">&#147;Three Dreams of Black&#148;</h2>
        </div>
        <div id = "error">
          <!-- Any errors fall here -->
          <noscript>
            We are deeply sorry, but it appears your computer&#39;s graphics card and your browser do not support the &#147;3 Dreams of Black&#148; experience. You can find more details for troubleshooting WebGL issues <a href = 'http://get.webgl.org/troubleshooting/'>here<a> and obtain a list of recommended graphics cards and browsers. In the meantime, we would like to invite you to watch the video trailer of the &#147;3 Dreams of Black&#148; experience.
          </noscript>
        </div>
      </div>

      <div id = "bottom">
        <div id = "shout-out">
          <ul>
            <li><a href = "http://chromeexperiments.com/"><img src = "images/chrome-trans.png" alt = "This is a Chrome Experiment" border = "0" /></a></li>
            <li class = "divider">&nbsp;</li>
            <li><a href = "http://google.com/"><img src = "images/google-trans.png" alt = "Made With Friends From Google" border = "0" /></a></li>
            <li class = "clear">&nbsp;</li>
          </ul>
        </div>

        <div id = "navigation">
          <ul class = "primary">
            <li class = "first"><a href = "http://ro.me/tech">Technology</a></li>
            <li><a href = "http://ro.me/credits">Credits</a></li>
            <li><a href = "http://ro.me/album">Rome Album</a></li>
            <li><a href = "http://widgets.platform.emi.com/landing/2520403d33984be0b70fca43945728e9.html">Buy Album</a></li>
            <li class = "last">Share</li>
            <li class = "last icons"><a href = "#"><img src = "images/fb-trans.png" alt = "facebook" border = "0"  /></a></li>
            <li class = "last icons"><a href = "#"><img src = "images/twitter-trans.png" alt = "twitter" border = "0" /></a></li>
            <li class = "clear last">&nbsp;</li>
          </ul>
          <ul class = "secondary">
            <li class = "first"><a href = "http://ro.me/terms">Terms</a></li>
            <li class = "last"><a href = "http://ro.me/privacy">Privacy</a></li>
            <li class = "clear last">&nbsp;</li>
          </ul>
        </div>
        <div class = "clear">&nbsp;</div>
      </div>
    </div>
  </body>
</html>